const productsDatabase = [
    {
        id: 1,
        name: "گوشی سامسونگ Galaxy A54",
        category: "mobile",
        price: 18900000,
        oldPrice: 22000000,
        image: "a54.jpg",
        stock: 18,
        rating: 4.5,
        description: "گوشی هوشمند میان رده با صفحه نمایش Super AMOLED 6.4 اینچی، دوربین 50 مگاپیکسل و باتری 5000 میلی‌آمپر",
        specs: {
            "صفحه نمایش": "6.4 اینچ Super AMOLED 120Hz",
            "دوربین اصلی": "50 مگاپیکسل با OIS",
            "دوربین اولتراواید": "12 مگاپیکسل",
            "دوربین ماکرو": "5 مگاپیکسل",
            "دوربین سلفی": "32 مگاپیکسل",
            "رم": "8 گیگابایت",
            "حافظه داخلی": "256 گیگابایت",
            "باتری": "5000 میلی‌آمپر",
            "شارژ سریع": "25 وات",
            "پردازنده": "Exynos 1380",
            "سیستم عامل": "اندروید 14 با One UI 6.1"
        }
    },
    {
        id: 2,
        name: "گوشی شیائومی Redmi Note 13 Pro",
        category: "mobile",
        price: 16900000,
        oldPrice: 19500000,
        image: "redmi13pro.jpg",
        stock: 25,
        rating: 4.7,
        description: "گوشی پرفروش با دوربین 200 مگاپیکسل و نمایشگر AMOLED 120 هرتز",
        specs: {
            "صفحه نمایش": "6.67 اینچ AMOLED 120Hz",
            "دوربین اصلی": "200 مگاپیکسل با OIS",
            "دوربین اولتراواید": "8 مگاپیکسل",
            "دوربین ماکرو": "2 مگاپیکسل",
            "دوربین سلفی": "16 مگاپیکسل",
            "رم": "8 گیگابایت",
            "حافظه داخلی": "256 گیگابایت",
            "باتری": "5000 میلی‌آمپر",
            "شارژ سریع": "67 وات",
            "پردازنده": "Helio G99 Ultra",
            "سیستم عامل": "اندروید 13 با MIUI 14"
        }
    },
    {
        id: 3,
        name: "گوشی اپل iPhone 13",
        category: "mobile",
        price: 38900000,
        oldPrice: 42000000,
        image: "iphone13.jpg",
        stock: 8,
        rating: 4.9,
        description: "آیفون 13 با تراشه A15 Bionic و دوربین دوگانه پیشرفته",
        specs: {
            "صفحه نمایش": "6.1 اینچ Super Retina XDR",
            "تراشه": "A15 Bionic",
            "حافظه داخلی": "128 گیگابایت",
            "رم": "4 گیگابایت",
            "دوربین اصلی": "12 مگاپیکسل دوگانه",
            "دوربین سلفی": "12 مگاپیکسل",
            "باتری": "3240 میلی‌آمپر",
            "شارژ سریع": "20 وات",
            "مقاومت در برابر آب": "IP68",
            "سیستم عامل": "iOS 17"
        }
    },
    {
        id: 4,
        name: "تبلت سامسونگ Galaxy Tab S9",
        category: "tablet",
        price: 38900000,
        oldPrice: 42500000,
        image: "tabS9.jpg",
        stock: 12,
        rating: 4.6,
        description: "تبلت پرچمدار با صفحه نمایش AMOLED و قلم S-Pen",
        specs: {
            "صفحه نمایش": "11 اینچ AMOLED 120Hz",
            "پردازنده": "Snapdragon 8 Gen 2",
            "رم": "8 گیگابایت",
            "حافظه داخلی": "256 گیگابایت",
            "دوربین پشت": "13 مگاپیکسل",
            "دوربین سلفی": "12 مگاپیکسل",
            "باتری": "8000 میلی‌آمپر",
            "شارژ سریع": "45 وات",
            "قلم": "S-Pen داخل جعبه",
            "سیستم عامل": "اندروید 14"
        }
    },
    {
        id: 5,
        name: "گوشی Poco X6 Pro",
        category: "mobile",
        price: 18900000,
        oldPrice: 21000000,
        image: "pocoX6Pro.jpg",
        stock: 18,
        rating: 4.4,
        description: "گوشی اقتصادی با دوربین 108 مگاپیکسل و باتری 5000 میلی‌آمپر",
        specs: {
            "صفحه نمایش": "6.7 اینچ AMOLED 120Hz",
            "دوربین اصلی": "108 مگاپیکسل",
            "دوربین اولتراواید": "8 مگاپیکسل",
            "دوربین ماکرو": "2 مگاپیکسل",
            "دوربین سلفی": "16 مگاپیکسل",
            "رم": "12 گیگابایت",
            "حافظه داخلی": "512 گیگابایت",
            "باتری": "5000 میلی‌آمپر",
            "شارژ سریع": "67 وات",
            "پردازنده": "Dimensity 8300 Ultra",
            "سیستم عامل": "اندروید 14 با HyperOS"
        }
    },
    {
        id: 6,
        name: "لپ تاپ ایسوس VivoBook 15",
        category: "laptop",
        price: 26800000,
        oldPrice: 29500000,
        image: "vivobook15.jpg",
        stock: 10,
        rating: 4.3,
        description: "لپ تاپ سبک با پردازنده Intel Core i5 و 16 گیگابایت رم",
        specs: {
            "پردازنده": "Intel Core i5-1235U",
            "رم": "16 گیگابایت DDR4",
            "حافظه داخلی": "512 گیگابایت SSD NVMe",
            "صفحه نمایش": "15.6 اینچ FHD IPS",
            "کارت گرافیک": "Intel Iris Xe",
            "باتری": "42 وات ساعت",
            "وزن": "1.7 کیلوگرم",
            "پورت ها": "USB-C, USB 3.0, HDMI",
            "بلندگو": "استریو با صدای هارمن",
            "سیستم عامل": "ویندوز 11"
        }
    },
    {
        id: 7,
        name: "لپ تاپ لنوو IdeaPad Gaming 3",
        category: "laptop",
        price: 28900000,
        oldPrice: 32500000,
        image: "ideapadGaming3.jpg",
        stock: 7,
        rating: 4.5,
        description: "لپ تاپ گیمینگ با کارت گرافیک NVIDIA RTX 3050",
        specs: {
            "پردازنده": "Intel Core i5-12450H",
            "رم": "16 گیگابایت DDR4",
            "حافظه داخلی": "512 گیگابایت SSD NVMe",
            "کارت گرافیک": "NVIDIA RTX 3050 4GB",
            "صفحه نمایش": "15.6 اینچ FHD 120Hz",
            "باتری": "45 وات ساعت",
            "وزن": "2.2 کیلوگرم",
            "کیبورد": "مخصوص گیمینگ با نور پس زمینه",
            "پورت ها": "USB-C, HDMI, Ethernet",
            "سیستم عامل": "ویندوز 11"
        }
    },
    {
        id: 8,
        name: "لپ تاپ اپل MacBook Air M2",
        category: "laptop",
        price: 58900000,
        oldPrice: 62900000,
        image: "macbookAirM2.jpg",
        stock: 5,
        rating: 4.9,
        description: "لپ تاپ فوق العاده سبک و قدرتمند با تراشه Apple M2",
        specs: {
            "پردازنده": "Apple M2 (8 هسته‌ای)",
            "رم": "8 گیگابایت یکپارچه",
            "حافظه داخلی": "256 گیگابایت SSD",
            "صفحه نمایش": "13.6 اینچ Liquid Retina",
            "گرافیک": "8 هسته‌ای",
            "باتری": "تا 18 ساعت",
            "وزن": "1.24 کیلوگرم",
            "وبکم": "1080p FaceTime HD",
            "شارژر": "30 وات USB-C",
            "سیستم عامل": "macOS Sonoma"
        }
    },
    {
        id: 9,
        name: "مانیتور ال جی 27 اینچ UltraGear",
        category: "monitor",
        price: 15900000,
        oldPrice: 17500000,
        image: "ultragear27.jpg",
        stock: 14,
        rating: 4.6,
        description: "مانیتور گیمینگ 27 اینچی با نرخ تازه‌سازی 144 هرتز",
        specs: {
            "صفحه نمایش": "27 اینچ IPS",
            "رزولوشن": "1920x1080 Full HD",
            "نرخ تازه‌سازی": "144Hz",
            "زمان پاسخگویی": "1ms",
            "پورت ها": "HDMI, DisplayPort",
            "فناوری": "AMD FreeSync Premium",
            "نور پس زمینه": "LED",
            "بلندگو": "ندارد",
            "قابلیت تنظیم": "ارتفاع و چرخش",
            "رنگ": "مشکی/قرمز"
        }
    },
    {
        id: 10,
        name: "هدفون بلوتوثی JBL Tune 760NC",
        category: "accessory",
        price: 5200000,
        oldPrice: 5900000,
        image: "jbl760nc.jpg",
        stock: 25,
        rating: 4.7,
        description: "هدفون نویز کنسلینگ فعال با کیفیت صدای عالی",
        specs: {
            "نوع": "روی گوشی",
            "اتصال": "بلوتوث 5.0 و سیمی",
            "باتری": "35 ساعت با نویز کنسلینگ",
            "نویز کنسلینگ": "فعال Adaptive",
            "میکروفون": "دارد با قابلیت هندزفری",
            "فرکانس پاسخگویی": "20Hz - 20kHz",
            "وزن": "220 گرم",
            "شارژ سریع": "5 دقیقه شارژ = 2 ساعت پخش",
            "امپدانس": "32 اهم",
            "رنگ": "آبی نفتی"
        }
    },
    {
        id: 11,
        name: "کیبورد و موس لاجیتک MK270",
        category: "accessory",
        price: 1650000,
        oldPrice: 1890000,
        image: "logitechMK270.jpg",
        stock: 30,
        rating: 4.4,
        description: "ست کیبورد و موس بی‌سیم با یک دریافت‌کننده",
        specs: {
            "نوع": "Wireless",
            "برد": "10 متر",
            "باتری کیبورد": "24 ماه",
            "باتری موس": "12 ماه",
            "دریافت‌کننده": "Unifying",
            "کیبورد": "دارای 8 کلید مالتی مدیا",
            "موس": "دارای 3 دکمه",
            "رزولوشن موس": "1000 dpi",
            "سازگاری": "ویندوز و مک",
            "رنگ": "مشکی"
        }
    },
    {
        id: 12,
        name: "پاور بانک انکر 20000mAh",
        category: "accessory",
        price: 2150000,
        oldPrice: 2450000,
        image: "anker20000.jpg",
        stock: 20,
        rating: 4.5,
        description: "پاور بانک پرظرفیت با شارژ سریع و دو پورت خروجی",
        specs: {
            "ظرفیت": "20000 میلی‌آمپر",
            "خروجی": "USB-C و USB-A",
            "شارژ سریع": "22.5 وات",
            "ورودی": "USB-C",
            "فناوری": "PowerIQ",
            "شارژ همزمان": "2 دستگاه",
            "سایز": "کامپکت",
            "LED": "نمایشگر میزان شارژ",
            "وزن": "340 گرم",
            "رنگ": "سفید"
        }
    },
    {
        id: 13,
        name: "هارد اکسترنال وسترن دیجیتال 2TB",
        category: "accessory",
        price: 3750000,
        oldPrice: 4200000,
        image: "wd2tb.jpg",
        stock: 15,
        rating: 4.6,
        description: "هارد اکسترنال با سرعت بالا و ظرفیت 2 ترابایت",
        specs: {
            "ظرفیت": "2 ترابایت",
            "نوع": "External HDD",
            "سرعت چرخش": "5400RPM",
            "پورت": "USB 3.0",
            "سایز": "2.5 اینچ",
            "ضد ضربه": "دارد",
            "نرم افزار": "پشتیبانی از بک‌آپ خودکار",
            "سازگاری": "ویندوز و مک",
            "وزن": "130 گرم",
            "رنگ": "مشکی"
        }
    },
    {
        id: 14,
        name: "وب کم لاجیتک C920s",
        category: "accessory",
        price: 3950000,
        oldPrice: 4350000,
        image: "logitechC920.jpg",
        stock: 12,
        rating: 4.7,
        description: "وب‌کم Full HD با میکروفون استریو و قابلیت حذف نویز",
        specs: {
            "رزولوشن": "1080p Full HD",
            "میکروفون": "استریو دوگانه",
            "نرخ فریم": "30 فریم بر ثانیه",
            "نوع": "USB با کابل 1.5 متر",
            "فوکوس": "خودکار",
            "زاویه دید": "78 درجه",
            "پوشش حریم خصوصی": "دارد",
            "نصب": "روی مانیتور یا سه پایه",
            "سازگاری": "ویندوز، مک، کروم",
            "رنگ": "مشکی"
        }
    },
    {
        id: 15,
        name: "دوربین کانن EOS 250D",
        category: "camera",
        price: 26900000,
        oldPrice: 29500000,
        image: "canon250d.jpg",
        stock: 9,
        rating: 4.6,
        description: "دوربین DSLR با کیفیت بالا و صفحه نمایش چرخان",
        specs: {
            "رزولوشن": "24.1 مگاپیکسل",
            "لنز همراه": "18-55mm f/4-5.6",
            "فیلمبرداری": "4K 25p",
            "صفحه نمایش": "3 اینچ چرخان لمسی",
            "وزن": "449 گرم",
            "حسگر": "APS-C CMOS",
            "فوکوس": "9 نقطه",
            "ایزورنج": "100-25600",
            "اتصال": "WiFi و بلوتوث",
            "باتری": "LC-E17"
        }
    },
    {
        id: 16,
        name: "دوربین سونی Alpha A6400",
        category: "camera",
        price: 34900000,
        oldPrice: 37900000,
        image: "sonyA6400.jpg",
        stock: 6,
        rating: 4.8,
        description: "دوربین بدون آینه با فوکوس خودکار سریع و فیلمبرداری 4K",
        specs: {
            "رزولوشن": "24.2 مگاپیکسل",
            "لنز همراه": "16-50mm f/3.5-5.6",
            "فوکوس": "0.02 ثانیه با ردیابی چشم",
            "فیلمبرداری": "4K 30p",
            "صفحه نمایش": "3 اینچ لمسی چرخان",
            "وزن": "403 گرم",
            "حسگر": "APS-C Exmor CMOS",
            "ایزورنج": "100-32000",
            "اتصال": "WiFi و NFC",
            "پورت": "Micro HDMI, USB"
        }
    },
    {
        id: 17,
        name: "یخچال فریزر سامسونگ 30 فوت",
        category: "home",
        price: 48900000,
        oldPrice: 52500000,
        image: "fridge30.jpg",
        stock: 4,
        rating: 4.7,
        description: "یخچال فریزر با ظرفیت بالا و تکنولوژی خنک‌کننده چندگانه",
        specs: {
            "ظرفیت": "30 فوت",
            "نوع": "فریزر بالا",
            "تکنولوژی": "Digital Inverter Compressor",
            "رنگ": "نقره‌ای استیل",
            "سیستم خنک‌کننده": "No Frost چندگانه",
            "کمپرسور": "اینورتر",
            "کلاس انرژی": "A++",
            "یخساز": "اتوماتیک",
            "صفحه نمایش": "LED لمسی",
            "قفسه‌ها": "شیشه‌ای مقاوم"
        }
    },
    {
        id: 18,
        name: "ماشین لباسشویی ال جی 9 کیلو",
        category: "home",
        price: 23500000,
        oldPrice: 25900000,
        image: "lgWashing9.jpg",
        stock: 7,
        rating: 4.5,
        description: "ماشین لباسشویی با موتور اینورتر مستقیم و برنامه‌های شستشوی متنوع",
        specs: {
            "ظرفیت": "9 کیلوگرم",
            "نوع": "درب جلو",
            "سرعت چرخش": "1200 دور در دقیقه",
            "مصرف انرژی": "A+++",
            "موتور": "اینورتر مستقیم",
            "تکنولوژی": "6 Motion",
            "برنامه شستشو": "14 برنامه",
            "صفحه نمایش": "LED",
            "بخارشوی": "دارد",
            "تاخیر انداز": "3 تا 19 ساعت"
        }
    },
    {
        id: 19,
        name: "هدفون بی‌سیم اپل AirPods Pro 2",
        category: "accessory",
        price: 12900000,
        oldPrice: 14500000,
        image: "airpodspro2.jpg",
        stock: 22,
        rating: 4.9,
        description: "هدفون بی‌سیم با نویز کنسلینگ فعال و تراشه H2",
        specs: {
            "نوع": "درون گوشی",
            "تراشه": "Apple H2",
            "باتری": "6 ساعت (با نویز کنسلینگ)",
            "کیس شارژ": "MagSafe و USB-C",
            "نویز کنسلینگ": "فعال Adaptive",
            "میکروفون": "دارد با کیفیت بالا",
            "مقاومت": "IP54 ضد آب و عرق",
            "حسگرها": "فشاری و لمسی",
            "صدا": "فضایی با ردیابی سر",
            "رنگ": "سفید"
        }
    },
    {
        id: 20,
        name: "اسپیکر بلوتوثی JBL Charge 5",
        category: "accessory",
        price: 6950000,
        oldPrice: 7500000,
        image: "jblcharge5.jpg",
        stock: 16,
        rating: 4.7,
        description: "اسپیکر قابل حمل با باتری قدرتمند و مقاوم در برابر آب",
        specs: {
            "نوع": "بلوتوث قابل حمل",
            "توان خروجی": "40 وات",
            "باتری": "20 ساعت پخش مداوم",
            "مقاومت": "IP67 ضد آب و گرد و غبار",
            "پاور بانک": "شارژ گوشی از طریق USB",
            "ورژن بلوتوث": "5.1",
            "فرکانس": "65Hz - 20kHz",
            "ورودی": "USB-C",
            "اتصال همزمان": "2 دستگاه",
            "رنگ": "آبی مشکی"
        }
    },
    {
        id: 21,
        name: "مچ‌بند هوشمند شیائومی Mi Band 8",
        category: "accessory",
        price: 1950000,
        oldPrice: 2250000,
        image: "miband8.jpg",
        stock: 35,
        rating: 4.5,
        description: "مچ‌بند هوشمند با نمایشگر AMOLED و ردیابی پیشرفته سلامت",
        specs: {
            "صفحه نمایش": "1.62 اینچ AMOLED 60Hz",
            "باتری": "16 روز مصرف معمولی",
            "ضد آب": "5ATM",
            "حسگرها": "ضربان قلب، خواب، اکسیژن خون SpO2",
            "اتصال": "بلوتوث 5.1",
            "GPS": "متصل به گوشی",
            "ورزش‌ها": "بیش از 150 حالت",
            "وزن": "27 گرم",
            "رنگ بند": "مشکی",
            "سازگاری": "اندروید و iOS"
        }
    },
    {
        id: 22,
        name: "گوشی موبایل نوکیا 105",
        category: "mobile",
        price: 895000,
        oldPrice: 990000,
        image: "nokia105.jpg",
        stock: 42,
        rating: 4.2,
        description: "گوشی دکمه‌ای ساده با باتری فوق العاده بادوام و چراغ قوه",
        specs: {
            "صفحه نمایش": "1.8 اینچ رنگی",
            "باتری": "800 میلی‌آمپر قابل تعویض",
            "حافظه داخلی": "4 مگابایت",
            "رادیو": "FM با پخش‌کننده",
            "چراغ قوه": "دارد",
            "ورودی سیم کارت": "دو سیم‌کارته",
            "ورودی حافظه": "microSD تا 32 گیگ",
            "بازی": "مار و ...",
            "وزن": "70 گرم",
            "رنگ": "آبی تیره"
        }
    },
    {
        id: 23,
        name: "تلویزیون سامسونگ 55 اینچ 4K",
        category: "tv",
        price: 32900000,
        oldPrice: 35900000,
        image: "samsungtv55.jpg",
        stock: 8,
        rating: 4.8,
        description: "تلویزیون هوشمند 4K با کیفیت تصویر عالی و پردازنده قدرتمند",
        specs: {
            "صفحه نمایش": "55 اینچ Crystal UHD",
            "رزولوشن": "3840x2160 4K",
            "پردازنده": "Crystal 4K",
            "سیستم عامل": "Tizen هوشمند",
            "رفع تاری": "Motion Xcelerator",
            "صدا": "20 وات",
            "پورت‌ها": "3 HDMI, 2 USB",
            "بلوتوث": "دارد",
            "WiFi": "دو بانده",
            "طراحی": "بدون حاشیه AirSlim"
        }
    },
    {
        id: 24,
        name: "کنترلر بازی ایکس باکس سری X",
        category: "gaming",
        price: 2450000,
        oldPrice: 2790000,
        image: "xboxcontroller.jpg",
        stock: 28,
        rating: 4.8,
        description: "دسته بازی بی‌سیم ایکس باکس با طراحی ارگونومیک",
        specs: {
            "نوع": "بی‌سیم",
            "اتصال": "Xbox Wireless, بلوتوث, USB-C",
            "باتری": "دو عدد قلمی",
            "ارگونومی": "طراحی بهبود یافته",
            "محرک‌ها": "ماشه‌های لرزشی",
            "دکمه‌ها": "مناسب برای تمام بازی‌ها",
            "سازگاری": "Xbox Series X|S, Xbox One, PC",
            "رنگ": "خاکستری",
            "وزن": "240 گرم",
            "جک هدفون": "3.5 میلی‌متر"
        }
    },
    {
        id: 25,
        name: "قهوه‌ساز دالیکس Bistro",
        category: "home",
        price: 6750000,
        oldPrice: 7450000,
        image: "bistro.jpg",
        stock: 11,
        rating: 4.5,
        description: "قهوه‌ساز اسپرسو ساز با مخزن آب و کف‌ساز شیر",
        specs: {
            "نوع": "اسپرسو ساز",
            "مخزن آب": "1.4 لیتر",
            "توان": "1450 وات",
            "فشار پمپ": "15 بار",
            "کف‌ساز شیر": "پنوماتیک",
            "سینی چکه": "قابل تنظیم",
            "ترموستات": "الکترونیکی",
            "ابعاد": "33x20x28 سانتی‌متر",
            "رنگ": "مشکی استیل",
            "قطعات": "قابل شستشو در ماشین ظرفشویی"
        }
    }
];

// ============ توابع کمکی ============
function getProductById(id) {
    return productsDatabase.find(p => p.id === parseInt(id));
}

function getRelatedProducts(currentId, limit = 4) {
    const current = getProductById(currentId);
    if (!current) return [];
    return productsDatabase
        .filter(p => p.category === current.category && p.id !== current.id)
        .slice(0, limit);
}

function getProductsByCategory(category) {
    if (!category) return productsDatabase;
    return productsDatabase.filter(p => p.category === category);
}

function searchProducts(query) {
    query = query.toLowerCase();
    return productsDatabase.filter(p => 
        p.name.toLowerCase().includes(query) || 
        (p.description && p.description.toLowerCase().includes(query)) ||
        (p.specs && Object.values(p.specs).some(spec => 
            String(spec).toLowerCase().includes(query)
        ))
    );
}